{"commands":["cd /home/ubuntu/kauri","cat \u003c\u003c\u0027EOF\u0027 \u003e /tmp/nginx.conf.b64","c2VydmVyIHsKICAgIGxpc3RlbiA4MDsKICAgIGxpc3RlbiA0NDMgc3NsOwogICAgc2VydmVyX25hbWUgbG9jYWxob3N0IGthdXJpLndlem9uLmZyIHdlem9uLmZyOwoKICAgIHNzbF9jZXJ0aWZpY2F0ZSAvZXRjL25naW54L3NzbC9zZWxmc2lnbmVkLmNydDsKICAgIHNzbF9jZXJ0aWZpY2F0ZV9rZXkgL2V0Yy9uZ2lueC9zc2wvc2VsZnNpZ25lZC5rZXk7CiAgICBzc2xfcHJvdG9jb2xzIFRMU3YxLjIgVExTdjEuMzsKICAgIHNzbF9wcmVmZXJfc2VydmVyX2NpcGhlcnMgb247CiAgICByb290IC91c3Ivc2hhcmUvbmdpbngvaHRtbDsNCiAgICBpbmRleCBpbmRleC5odG1sOw0KDQogICAgIyBFbmFibGUgZ3ppcCBjb21wcmVzc2lvbg0KICAgIGd6aXAgb247DQogICAgZ3ppcF92YXJ5IG9uOw0KICAgIGd6aXBfbWluX2xlbmd0aCAxMDI0Ow0KICAgIGd6aXBfdHlwZXMgdGV4dC9wbGFpbiB0ZXh0L2NzcyB0ZXh0L3htbCB0ZXh0L2phdmFzY3JpcHQgYXBwbGljYXRpb24veC1qYXZhc2NyaXB0IGFwcGxpY2F0aW9uL3htbCtyc3MgYXBwbGljYXRpb24vanNvbiBhcHBsaWNhdGlvbi9qYXZhc2NyaXB0Ow0KDQogICAgIyBTZWN1cml0eSBoZWFkZXJzDQogICAgYWRkX2hlYWRlciBYLUZyYW1lLU9wdGlvbnMgIlNBTUVPUklHSU4iIGFsd2F5czsNCiAgICBhZGRfaGVhZGVyIFgtQ29udGVudC1UeXBlLU9wdGlvbnMgIm5vc25pZmYiIGFsd2F5czsNCiAgICBhZGRfaGVhZGVyIFgtWFNTLVByb3RlY3Rpb24gIjE7IG1vZGU9YmxvY2siIGFsd2F5czsNCg0KICAgICMgU1BBIHJvdXRpbmcgLSBhbGwgcm91dGVzIGdvIHRvIGluZGV4Lmh0bWwNCiAgICBsb2NhdGlvbiAvIHsNCiAgICAgICAgdHJ5X2ZpbGVzICR1cmkgJHVyaS8gL2luZGV4Lmh0bWw7CiAgICB9DQoNCiAgICAjIENhY2hlIHN0YXRpYyBhc3NldHMNCiAgICBsb2NhdGlvbiB+KiBcLihqc3xjc3N8cG5nfGpwZ3xqcGVnfGdpZnxpY298c3ZnfHdvZmZ8d29mZjJ8dHRmfGVvdCkkIHsNCiAgICAgICAgZXhwaXJlcyAxeTsNCiAgICAgICAgYWRkX2hlYWRlciBDYWNoZS1Db250cm9sICJwdWJsaWMsIGltbXV0YWJsZSI7DQogICAgfQ0KDQogICAgIyBEb24ndCBjYWNoZSBpbmRleC5odG1sDQogICAgbG9jYXRpb24gPSAvaW5kZXguaHRtbCB7DQogICAgICAgIGFkZF9oZWFkZXIgQ2FjaGUtQ29udHJvbCAibm8tY2FjaGUsIG5vLXN0b3JlLCBtdXN0LXJldmFsaWRhdGUiOw0KICAgICAgICBhZGRfaGVhZGVyIFByYWdtYSAibm8tY2FjaGUiOw0KICAgICAgICBhZGRfaGVhZGVyIEV4cGlyZXMgIjAiOw0KICAgIH0NCg0KICAgICMgQVBJIHByb3h5IChvcHRpb25uZWwgLSBwb3VyIMODwql2aXRlciBsZXMgcHJvYmzDg8KobWVzIENPUlMgZW4gcHJvZHVjdGlvbikNCiAgICBsb2NhdGlvbiAvYXBpL3YxL2F1dGgvIHsKICAgICAgICBwcm94eV9wYXNzIGh0dHA6Ly9rYXVyaV91c2VyX3NlcnZpY2U6MzIwMS9hcGkvdjEvYXV0aC87CiAgICAgICAgcHJveHlfaHR0cF92ZXJzaW9uIDEuMTsKICAgICAgICBwcm94eV9zZXRfaGVhZGVyIFVwZ3JhZGUgJGh0dHBfdXBncmFkZTsKICAgICAgICBwcm94eV9zZXRfaGVhZGVyIENvbm5lY3Rpb24gJ3VwZ3JhZGUnOwogICAgICAgIHByb3h5X3NldF9oZWFkZXIgSG9zdCAkaG9zdDsKICAgICAgICBwcm94eV9jYWNoZV9ieXBhc3MgJGh0dHBfdXBncmFkZTsNCiAgICAgICAgcHJveHlfc2V0X2hlYWRlciBYLVJlYWwtSVAgJHJlbW90ZV9hZGRyOw0KICAgICAgICBwcm94eV9zZXRfaGVhZGVyIFgtRm9yd2FyZGVkLUZvciAkcHJveHlfYWRkX3hfZm9yd2FyZGVkX2ZvcjsNCiAgICAgICAgcHJveHlfc2V0X2hlYWRlciBYLUZvcndhcmRlZC1Qcm90byAkc2NoZW1lOw0KICAgIH0NCg0KICAgIGxvY2F0aW9uIC9hcGkvdjEvY2hhdC8gewogICAgICAgIHByb3h5X3Bhc3MgaHR0cDovL2thdXJpX2NoYXRib3Rfc2VydmljZTozMjAyL2FwaS92MS9jaGF0LzsKICAgICAgICBwcm94eV9odHRwX3ZlcnNpb24gMS4xOwogICAgICAgIHByb3h5X3NldF9oZWFkZXIgVXBncmFkZSAkaHR0cF91cGdyYWRlOwogICAgICAgIHByb3h5X3NldF9oZWFkZXIgQ29ubmVjdGlvbiAndXBncmFkZSc7CiAgICAgICAgcHJveHlfc2V0X2hlYWRlciBIb3N0ICRob3N0OwogICAgICAgIHByb3h5X2NhY2hlX2J5cGFzcyAkaHR0cF91cGdyYWRlOwogICAgICAgIHByb3h5X3NldF9oZWFkZXIgWC1SZWFsLUlQICRyZW1vdGVfYWRkcjsKICAgICAgICBwcm94eV9zZXRfaGVhZGVyIFgtRm9yd2FyZGVkLUZvciAkcHJveHlfYWRkX3hfZm9yd2FyZGVkX2ZvcjsKICAgICAgICBwcm94eV9zZXRfaGVhZGVyIFgtRm9yd2FyZGVkLVByb3RvICRzY2hlbWU7CgogICAgICAgICMgU3VwcG9ydCBmb3IgU1NFCiAgICAgICAgcHJveHlfYnVmZmVyaW5nIG9mZjsKICAgICAgICBwcm94eV9yZWFkX3RpbWVvdXQgODY0MDA7CiAgICB9CgogICAgIyBDb252ZXJzYXRpb25zICYgaGlzdG9yeSAoY2hhdGJvdCBzZXJ2aWNlIFJFU1QgQVBJKQogICAgbG9jYXRpb24gXn4gL2FwaS92MS9jb252ZXJzYXRpb25zLyB7CiAgICAgICAgcHJveHlfcGFzcyBodHRwOi8va2F1cmlfY2hhdGJvdF9zZXJ2aWNlOjMyMDIvYXBpL3YxL2NvbnZlcnNhdGlvbnMvOwogICAgICAgIHByb3h5X2h0dHBfdmVyc2lvbiAxLjE7CiAgICAgICAgcHJveHlfc2V0X2hlYWRlciBVcGdyYWRlICRodHRwX3VwZ3JhZGU7CiAgICAgICAgcHJveHlfc2V0X2hlYWRlciBDb25uZWN0aW9uICd1cGdyYWRlJzsKICAgICAgICBwcm94eV9zZXRfaGVhZGVyIEhvc3QgJGhvc3Q7CiAgICAgICAgcHJveHlfY2FjaGVfYnlwYXNzICRodHRwX3VwZ3JhZGU7CiAgICAgICAgcHJveHlfc2V0X2hlYWRlciBYLVJlYWwtSVAgJHJlbW90ZV9hZGRyOwogICAgICAgIHByb3h5X3NldF9oZWFkZXIgWC1Gb3J3YXJkZWQtRm9yICRwcm94eV9hZGRfeF9mb3J3YXJkZWRfZm9yOwogICAgICAgIHByb3h5X3NldF9oZWFkZXIgWC1Gb3J3YXJkZWQtUHJvdG8gJHNjaGVtZTsKICAgIH0KCiAgICAjIENvbnZlcnNhdGlvbnMgbGlzdGluZyB3aXRob3V0IHRyYWlsaW5nIHNsYXNoCiAgICBsb2NhdGlvbiA9IC9hcGkvdjEvY29udmVyc2F0aW9ucyB7CiAgICAgICAgcHJveHlfcGFzcyBodHRwOi8va2F1cmlfY2hhdGJvdF9zZXJ2aWNlOjMyMDIvYXBpL3YxL2NvbnZlcnNhdGlvbnM7CiAgICAgICAgcHJveHlfaHR0cF92ZXJzaW9uIDEuMTsKICAgICAgICBwcm94eV9zZXRfaGVhZGVyIFVwZ3JhZGUgJGh0dHBfdXBncmFkZTsKICAgICAgICBwcm94eV9zZXRfaGVhZGVyIENvbm5lY3Rpb24gJ3VwZ3JhZGUnOwogICAgICAgIHByb3h5X3NldF9oZWFkZXIgSG9zdCAkaG9zdDsKICAgICAgICBwcm94eV9jYWNoZV9ieXBhc3MgJGh0dHBfdXBncmFkZTsKICAgICAgICBwcm94eV9zZXRfaGVhZGVyIFgtUmVhbC1JUCAkcmVtb3RlX2FkZHI7CiAgICAgICAgcHJveHlfc2V0X2hlYWRlciBYLUZvcndhcmRlZC1Gb3IgJHByb3h5X2FkZF94X2ZvcndhcmRlZF9mb3I7CiAgICAgICAgcHJveHlfc2V0X2hlYWRlciBYLUZvcndhcmRlZC1Qcm90byAkc2NoZW1lOwogICAgfQoKICAgICMgRGVmYXVsdCBwcm94eSBmb3IgdGhlIHVzZXIgc2VydmljZSAodXNlcnMsIHN1YnNjcmlwdGlvbiwgdmVyaWZpY2F0aW9uLCBPQXV0aCwgZXRjLikKICAgIGxvY2F0aW9uIF5+IC9hcGkvdjEvIHsKICAgICAgICBwcm94eV9wYXNzIGh0dHA6Ly9rYXVyaV91c2VyX3NlcnZpY2U6MzIwMS9hcGkvdjEvOwogICAgICAgIHByb3h5X2h0dHBfdmVyc2lvbiAxLjE7CiAgICAgICAgcHJveHlfc2V0X2hlYWRlciBVcGdyYWRlICRodHRwX3VwZ3JhZGU7CiAgICAgICAgcHJveHlfc2V0X2hlYWRlciBDb25uZWN0aW9uICd1cGdyYWRlJzsKICAgICAgICBwcm94eV9zZXRfaGVhZGVyIEhvc3QgJGhvc3Q7CiAgICAgICAgcHJveHlfY2FjaGVfYnlwYXNzICRodHRwX3VwZ3JhZGU7CiAgICAgICAgcHJveHlfc2V0X2hlYWRlciBYLVJlYWwtSVAgJHJlbW90ZV9hZGRyOwogICAgICAgIHByb3h5X3NldF9oZWFkZXIgWC1Gb3J3YXJkZWQtRm9yICRwcm94eV9hZGRfeF9mb3J3YXJkZWRfZm9yOwogICAgICAgIHByb3h5X3NldF9oZWFkZXIgWC1Gb3J3YXJkZWQtUHJvdG8gJHNjaGVtZTsKICAgIH0KfQoKIyBSZXZlcnNlIHByb3h5IGZvciBHcmFmYW5hIHNvIGdyYWZhbmEud2V6b24uZnIgcm91dGVzIHRvIHRoZSBHcmFmYW5hIGNvbnRhaW5lci4Kc2VydmVyIHsKICAgIGxpc3RlbiA4MDsKICAgIGxpc3RlbiA0NDMgc3NsOwogICAgc2VydmVyX25hbWUgZ3JhZmFuYS53ZXpvbi5mcjsKCiAgICBzc2xfY2VydGlmaWNhdGUgL2V0Yy9uZ2lueC9zc2wvc2VsZnNpZ25lZC5jcnQ7CiAgICBzc2xfY2VydGlmaWNhdGVfa2V5IC9ldGMvbmdpbngvc3NsL3NlbGZzaWduZWQua2V5OwogICAgc3NsX3Byb3RvY29scyBUTFN2MS4yIFRMU3YxLjM7CiAgICBzc2xfcHJlZmVyX3NlcnZlcl9jaXBoZXJzIG9uOwoKICAgIGxvY2F0aW9uIC8gewogICAgICAgIHByb3h5X3Bhc3MgaHR0cDovL2dyYWZhbmE6MzAwMC87CiAgICAgICAgcHJveHlfaHR0cF92ZXJzaW9uIDEuMTsKICAgICAgICBwcm94eV9zZXRfaGVhZGVyIEhvc3QgJGhvc3Q7CiAgICAgICAgcHJveHlfc2V0X2hlYWRlciBYLVJlYWwtSVAgJHJlbW90ZV9hZGRyOwogICAgICAgIHByb3h5X3NldF9oZWFkZXIgWC1Gb3J3YXJkZWQtRm9yICRwcm94eV9hZGRfeF9mb3J3YXJkZWRfZm9yOwogICAgICAgIHByb3h5X3NldF9oZWFkZXIgWC1Gb3J3YXJkZWQtUHJvdG8gJHNjaGVtZTsKICAgICAgICBwcm94eV9zZXRfaGVhZGVyIFVwZ3JhZGUgJGh0dHBfdXBncmFkZTsKICAgICAgICBwcm94eV9zZXRfaGVhZGVyIENvbm5lY3Rpb24gJGh0dHBfY29ubmVjdGlvbjsKICAgICAgICBwcm94eV9yZWFkX3RpbWVvdXQgOTBzOwogICAgfQp9Cg==\r\n","EOF","base64 -d /tmp/nginx.conf.b64 \u003e frontend/kauri-app/nginx.conf","rm /tmp/nginx.conf.b64","docker compose build kauri_frontend","docker compose up -d kauri_frontend","docker compose exec kauri_frontend nginx -T | grep -n \u0027grafana\u0027 -n || true"]}
